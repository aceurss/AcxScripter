--// Settings
getgenv().BondFarmSetting = {
    tweenDuration = 15, -- Teleport speed, minimum 13
    AutoExecute = true -- NEW: auto-execute on new server
}

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local StarterGui = game:GetService("StarterGui")
local TeleportService = game:GetService("TeleportService")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Create ScreenGui (overlay)
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "BondFarmOverlay"
screenGui.ResetOnSpawn = false
screenGui.IgnoreGuiInset = true
screenGui.DisplayOrder = 999999
screenGui.Parent = playerGui

-- Rainbow AUTOBONDSV2 Label
local rainbowLabel = Instance.new("TextLabel")
rainbowLabel.Size = UDim2.new(1, 0, 0.1, 0)
rainbowLabel.Position = UDim2.new(0, 0, 0, 0)
rainbowLabel.BackgroundTransparency = 1
rainbowLabel.Text = "AUTOBONDSV2"
rainbowLabel.Font = Enum.Font.SourceSansBold
rainbowLabel.TextSize = 50
rainbowLabel.TextColor3 = Color3.fromRGB(255, 0, 0)
rainbowLabel.ZIndex = 2
rainbowLabel.TextStrokeTransparency = 0
rainbowLabel.Parent = screenGui

-- Animate rainbow text
task.spawn(function()
    while true do
        for hue = 0, 1, 0.01 do
            rainbowLabel.TextColor3 = Color3.fromHSV(hue, 1, 1)
            task.wait(0.02)
        end
    end
end)

-- "MADE BY ACXTHESCRIPTER" Label
local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1, 0, 0.2, 0)
titleLabel.Position = UDim2.new(0, 0, 0.08, 0)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "MADE BY ACXTHESCRIPTER"
titleLabel.Font = Enum.Font.SourceSansBold
titleLabel.TextSize = 60
titleLabel.TextColor3 = Color3.fromRGB(255, 0, 0)
titleLabel.ZIndex = 2
titleLabel.TextStrokeTransparency = 0
titleLabel.Parent = screenGui

-- Subtitle
local subText = Instance.new("TextLabel")
subText.Size = UDim2.new(1, 0, 0.1, 0)
subText.Position = UDim2.new(0, 0, 0.25, 0)
subText.BackgroundTransparency = 1
subText.Text = "STARTING TO COLLECT BONDS..."
subText.Font = Enum.Font.SourceSansBold
subText.TextSize = 40
subText.TextColor3 = Color3.fromRGB(255, 255, 255)
subText.ZIndex = 2
subText.Parent = screenGui

-- Disclaimer
local disclaimerText = Instance.new("TextLabel")
disclaimerText.Size = UDim2.new(1, 0, 0.1, 0)
disclaimerText.Position = UDim2.new(0, 0, 0.85, 0)
disclaimerText.BackgroundTransparency = 1
disclaimerText.Text = "Disclaimer: Wait until you die, i added a auto replay to play again, leave from game if you want to stop"
disclaimerText.Font = Enum.Font.SourceSans
disclaimerText.TextSize = 20
disclaimerText.TextColor3 = Color3.fromRGB(255, 255, 255)
disclaimerText.TextWrapped = true
disclaimerText.ZIndex = 2
disclaimerText.Parent = screenGui

-- Send notification
task.spawn(function()
    StarterGui:SetCore("SendNotification", {
        Title = "CapriHub BondFarm",
        Text = "It takes 1-2 minutes to start farming, please wait...",
        Duration = 10
    })
end)

-- BondFarmScript loader
local function loadBondFarmScript()
    task.spawn(function()
        task.wait(3)
        loadstring(game:HttpGet('https://raw.githubusercontent.com/DonjoScripts/Public-Scripts/refs/heads/Slap-Battles/TheFastestBondStealer.lua'))()
        print("[BondFarm] Script loaded!")
    end)
end

-- First run
loadBondFarmScript()

-- Monitor End Screen (Everyone Died)
local function monitorEndScreen()
    local endDecisionRemote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("EndDecision")

    endDecisionRemote.OnClientEvent:Connect(function()
        -- Remove Black Screen
        if screenGui then
            screenGui:Destroy()
            print("[Auto] BlackScreen Removed after Everyone Died")
        end

        -- Play Again
        task.wait(1)
        endDecisionRemote:FireServer(false)
        print("[AutoQueue] Play Again pressed.")

        -- Reload bond farm after rejoining
        task.wait(5)
        loadBondFarmScript()
        print("[AutoReload] BondFarm script reloaded after replay.")
    end)
end

task.spawn(monitorEndScreen)

-- Backup: Reload farm script if respawned
player.CharacterAdded:Connect(function()
    task.wait(5)
    loadBondFarmScript()
    print("[Backup] Reload script on respawn")
end)

-- AutoExecute if setting is true
if getgenv().BondFarmSetting.AutoExecute then
    local Source = game:HttpGet('PASTE YOUR FULL SCRIPT URL HERE (RAW)')
    queue_on_teleport(Source)
    print("[AutoExecute] Will re-execute script after teleport")
end
